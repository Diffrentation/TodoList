# Quick Setup Guide

## Prerequisites

- Node.js 18+ installed
- MongoDB database (local or MongoDB Atlas)
- Email account for sending OTPs (optional for development)

## Installation Steps

### 1. Install Dependencies

```bash
npm install
```

### 2. Setup Environment Variables

**Option A: Automatic Setup (Recommended)**

```bash
npm run setup-env
```

This will create `.env.local` with auto-generated JWT secrets.

**Option B: Manual Setup**
Copy the template file:

```bash
cp env.template .env.local
```

Then edit `.env.local` and update the following:

**Required Variables:**

- `MONGODB_URI`: Your MongoDB connection string
- `JWT_SECRET`: Secret key for access tokens (auto-generated if using setup script)
- `JWT_REFRESH_SECRET`: Secret key for refresh tokens (auto-generated if using setup script)

**Optional Variables (for email OTP):**

- `SMTP_HOST`: SMTP server host (default: smtp.gmail.com)
- `SMTP_PORT`: SMTP server port (default: 587)
- `SMTP_USER`: Your email address
- `SMTP_PASS`: Your email app password

**Note:** If email is not configured, OTPs will be logged to the console in development mode.

### 3. Gmail Setup (for OTP emails - Optional)

1. Enable 2-factor authentication on your Google account
2. Go to Google Account Settings → Security
3. Generate an "App Password"
4. Use the app password in `SMTP_PASS`

### 4. Run the Application

```bash
npm run dev
```

The app will be available at `http://localhost:3000`

## Environment Variables Reference

| Variable             | Required | Description                              | Default          |
| -------------------- | -------- | ---------------------------------------- | ---------------- |
| `MONGODB_URI`        | ✅ Yes   | MongoDB connection string                | -                |
| `JWT_SECRET`         | ✅ Yes   | Secret for access tokens (min 32 chars)  | -                |
| `JWT_REFRESH_SECRET` | ✅ Yes   | Secret for refresh tokens (min 32 chars) | -                |
| `SMTP_HOST`          | ❌ No    | SMTP server hostname                     | `smtp.gmail.com` |
| `SMTP_PORT`          | ❌ No    | SMTP server port                         | `587`            |
| `SMTP_USER`          | ❌ No    | Email address for sending OTPs           | -                |
| `SMTP_PASS`          | ❌ No    | Email app password                       | -                |
| `NODE_ENV`           | ❌ No    | Environment (development/production)     | `development`    |

## Development Notes

- **OTP in Development**: If email is not configured, OTPs will be logged to the console
- **Check Server Logs**: Look for `[DEV MODE] OTP for email@example.com: 123456` in your terminal
- **JWT Secrets**: Auto-generated by setup script. For production, use strong random strings (32+ characters)

## Testing Flow

1. Register a new account at `/register`
2. Check email (or console) for OTP
3. Verify OTP at `/verify-otp`
4. Login at `/login`
5. Access dashboard at `/dashboard`
6. Create and manage tasks

## Troubleshooting

### MongoDB Connection Error (`ECONNREFUSED`)

**This error means MongoDB is not running or not accessible.**

**Quick Fix Options:**

1. **Use MongoDB Atlas (Cloud) - Recommended** ⭐

   - No installation needed
   - Free tier available
   - See `MONGODB_SETUP.md` for detailed instructions
   - Update `MONGODB_URI` in `.env.local` with Atlas connection string

2. **Install MongoDB Locally**
   - See `MONGODB_SETUP.md` for installation instructions
   - Start MongoDB service: `net start MongoDB` (Windows) or `brew services start mongodb-community` (macOS)

**For detailed MongoDB setup instructions, see `MONGODB_SETUP.md`**

### Email Not Sending

- Verify SMTP credentials
- Check Gmail app password
- In development, check console for OTP

### Authentication Issues

- Verify JWT secrets are set
- Clear browser cookies
- Check token expiration (15 min for access token)
